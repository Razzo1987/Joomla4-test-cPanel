Joomla=window.Joomla||{},Joomla.MediaManager=Joomla.MediaManager||{},Joomla.MediaManager.Edit=Joomla.MediaManager.Edit||{},function(){'use strict';var a=function(a,b){var c=document.getElementById("image-source"),d=document.createElement("canvas");d.width=a,d.height=b,d.getContext("2d").drawImage(c,0,0,a,b);var e="jpg"===Joomla.MediaManager.Edit.original.extension?"jpeg":Joomla.MediaManager.Edit.original.extension,f=document.getElementById("jform_resize_quality").value;Joomla.MediaManager.Edit.current.contents=d.toDataURL("image/".concat(e),f);var g=document.getElementById("image-preview");g.width=a,g.height=b,g.src=Joomla.MediaManager.Edit.current.contents,document.getElementById("jform_resize_width").value=parseInt(a,10),document.getElementById("jform_resize_height").value=parseInt(b,10),window.dispatchEvent(new Event("mediaManager.history.point"))},b=function(){setTimeout(function funct(){var b=document.getElementById("image-source"),c=document.getElementById("jform_resize_width"),d=document.getElementById("jform_resize_height");c.value=b.width,d.value=b.height,c.addEventListener("change",function(c){var d=c.target;a(parseInt(d.value,10),parseInt(d.value,10)/(b.width/b.height))}),d.addEventListener("change",function(c){var d=c.target;a(parseInt(d.value,10)*(b.width/b.height),parseInt(d.value,10))});var e=document.getElementById("jform_resize_w"),f=document.getElementById("jform_resize_h");e.min=0,e.max=b.width,e.value=b.width,f.min=0,f.max=b.height,f.value=b.height,e.addEventListener("input",function(c){var d=c.target;a(parseInt(d.value,10),parseInt(d.value,10)/(b.width/b.height))}),f.addEventListener("input",function(c){var d=c.target;a(parseInt(d.value,10)*(b.width/b.height),parseInt(d.value,10))})},1e3)};Joomla.MediaManager.Edit.resize={Activate:function Activate(a){b(a)},Deactivate:function Deactivate(){}}}();