Joomla=window.Joomla||{},function(a,b){'use strict';a.hideAssociation=function(a,c){var d=[].slice.call(b.querySelectorAll("#associations .control-group"));d.forEach(function(b){var d=b.querySelector(".control-label label");if(d){var e=d.getAttribute("for");e.replace(/_name$/,"")==="".concat(a,"_associations_").concat(c.replace("-","_"))&&b.classList.add("hidden")}})},a.showAssociationMessage=function(){var c=[].slice.call(b.querySelectorAll("#associations .control-group")),d=b.getElementById("associations");if(d){var e=b.createElement("joomla-alert");e.innerHTML=a.JText._("JGLOBAL_ASSOC_NOT_POSSIBLE"),d.insertAdjacentElement("afterbegin",e)}c.forEach(function(a){a.classList.add("hidden")})},a.injectAssociations=function(b,c){var d;b.success?(0!==b.data.length&&[].slice.call(Object.keys(b.data)).forEach(function(a){d=c+a.replace("-","_"),window[d](b.data[a].id,b.data[a].title,b.data[a].catid,null,null,a)}),b.message&&a.renderMessages({notice:[b.message]})):a.renderMessages({warning:[a.JText._("JGLOBAL_ASSOCIATIONS_PROPAGATE_FAILED")]})},a.propagateAssociation=function(c,d){var e=b.getElementById("".concat(c,"_id")).value,f=b.getElementById("jform_language"),g=f.options[f.selectedIndex].value,h={task:"ajax.fetchAssociations",format:"json",assocId:e,excludeLang:g};h[a.getOptions("csrf.token","")]=1;var i=Object.keys(h).reduce(function(b,a){return b.push("".concat(a,"=").concat(encodeURIComponent(h[a]))),b},[]).join("&"),j="".concat(b.forms.adminForm.action,"&").concat(i);return a.request({url:j,method:"GET",data:JSON.stringify(h),headers:{"Content-Type":"application/json"},onSuccess:function onSuccess(b){a.injectAssociations(JSON.parse(b),d)},onError:function onError(){a.renderMessages({warning:[a.JText._("JGLOBAL_ASSOCIATIONS_PROPAGATE_FAILED")]})}}),!1},b.addEventListener("DOMContentLoaded",function(){var c=a.getOptions("system.associations.edit"),d=c.formControl||"jform",e=b.getElementById("".concat(d,"_language"));1===parseInt(c.hidden,10)?a.showAssociationMessage():e&&a.hideAssociation(d,e.value),e&&e.addEventListener("change",function(c){var e=c.target;a.removeMessages();var f=!1,g=[].slice.call(b.querySelectorAll("#associations .control-group"));g.forEach(function(a){var c=a.querySelector(".control-label label").getAttribute("for"),e=c.replace("_name","").replace("jform_associations_","");a.classList.remove("hidden"),f||""===b.getElementById("".concat(d,"_associations_").concat(e,"_id")).value||(f=!0);var g=b.getElementById("".concat(d,"_associations_").concat(e,"_clear"));g.onclick?g.onclick():g.click&&g.click()}),f&&a.renderMessages({warning:[a.JText._("JGLOBAL_ASSOCIATIONS_RESET_WARNING")]});var h=e.value;"*"===h?a.showAssociationMessage():a.hideAssociation(d,h)})})}(Joomla,document);