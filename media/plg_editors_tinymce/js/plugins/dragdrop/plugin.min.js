function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}tinymce.PluginManager.add("jdragndrop",function(a){function b(b,c){var d,e="".concat(tinyMCE.activeEditor.settings.uploadUri,"&path=").concat(tinyMCE.activeEditor.settings.comMediaAdapter),f=(d={},_defineProperty(d,tinyMCE.activeEditor.settings.csrfToken,"1"),_defineProperty(d,"name",b),_defineProperty(d,"content",c),_defineProperty(d,"parent",tinyMCE.activeEditor.settings.parentUploadFolder),d);Joomla.request({url:e,method:"POST",data:JSON.stringify(f),headers:{"Content-Type":"application/json"},onSuccess:function onSuccess(b){var c;try{c=JSON.parse(b)}catch(b){a.windowManager.alert("".concat(Joomla.Text._("JERROR"),": {e}"))}if(c.data&&c.data.path){var f;if(/local-/.test(c.data.adapter)){var d=Joomla.getOptions("system.paths"),e=d.rootFull;f="".concat(c.data.thumb_path.split(e)[1])}else c.data.thumb_path&&(f=c.data.thumb_path);tinyMCE.activeEditor.execCommand("mceInsertContent",!1,"<img loading=\"lazy\" src=\"".concat(f,"\" alt=\"\"/>"))}},onError:function onError(b){a.windowManager.alert("Error: ".concat(b.statusText))}})}function c(a){var c=new FileReader;c.onload=function(c){var d=c.target.result,e=d.indexOf("base64")+7,f=d.slice(e,d.length);b(a.name,f)},c.readAsDataURL(a)}tinyMCE.DOM.bind(document,"dragleave",function(a){return a.stopPropagation(),a.preventDefault(),tinyMCE.activeEditor.contentAreaContainer.style.borderWidth="1px 0 0",!1}),a.on("dragenter",function(a){return a.stopPropagation(),!1}),a.on("dragover",function(b){return b.preventDefault(),a.contentAreaContainer.style.borderStyle="dashed",a.contentAreaContainer.style.borderWidth="5px",!1}),"undefined"==typeof FormData?(Joomla.renderMessages({error:[Joomla.JText._("PLG_TINY_ERR_UNSUPPORTEDBROWSER")]}),a.on("drop",function(a){return a.preventDefault(),!1})):a.on("drop",function(b){if(b.preventDefault(),b.dataTransfer&&b.dataTransfer.files&&0<b.dataTransfer.files.length){var d=[].slice.call(b.dataTransfer.files);d.forEach(function(a){a.name.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)&&c(a)})}a.contentAreaContainer.style.borderWidth="1px 0 0"})});