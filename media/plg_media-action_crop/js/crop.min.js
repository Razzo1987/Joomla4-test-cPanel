Joomla=window.Joomla||{},Joomla.MediaManager=Joomla.MediaManager||{},Joomla.MediaManager.Edit=Joomla.MediaManager.Edit||{},function(){'use strict';var a=function(){var a=document.getElementById("image-preview");Joomla.MediaManager.Edit.crop.cropper=new Cropper(a,{viewMode:1,responsive:!0,restore:!0,autoCrop:!0,movable:!1,zoomable:!1,rotatable:!1,autoCropArea:1,minContainerWidth:a.offsetWidth,minContainerHeight:a.offsetHeight,crop:function crop(a){document.getElementById("jform_crop_x").value=Math.round(a.detail.x),document.getElementById("jform_crop_y").value=Math.round(a.detail.y),document.getElementById("jform_crop_width").value=Math.round(a.detail.width),document.getElementById("jform_crop_height").value=Math.round(a.detail.height);var b="jpg"===Joomla.MediaManager.Edit.original.extension?"jpeg":Joomla.MediaManager.Edit.original.extension,c=document.getElementById("jform_crop_quality").value;Joomla.MediaManager.Edit.current.contents=this.cropper.getCroppedCanvas().toDataURL("image/".concat(b),c),window.dispatchEvent(new Event("mediaManager.history.point"))}}),document.getElementById("jform_crop_x").addEventListener("change",function(a){var b=a.target;Joomla.MediaManager.Edit.crop.cropper.setData({x:parseInt(b.value,10)})}),document.getElementById("jform_crop_y").addEventListener("change",function(a){var b=a.target;Joomla.MediaManager.Edit.crop.cropper.setData({y:parseInt(b.value,10)})}),document.getElementById("jform_crop_width").addEventListener("change",function(a){var b=a.target;Joomla.MediaManager.Edit.crop.cropper.setData({width:parseInt(b.value,10)})}),document.getElementById("jform_crop_height").addEventListener("change",function(a){var b=a.target;Joomla.MediaManager.Edit.crop.cropper.setData({height:parseInt(b.value,10)})}),document.getElementById("jform_aspectRatio").addEventListener("change",function(a){var b=a.target;Joomla.MediaManager.Edit.crop.cropper.setAspectRatio(b.value)}),a.addEventListener("load",function(){var b=[].slice.call(document.querySelectorAll(".crop-aspect-ratio-option")),c=a.naturalWidth/a.naturalHeight;!Number.isNaN(c)&&Number.isFinite(c)&&(b[0].value=c),Joomla.MediaManager.Edit.crop.cropper.setAspectRatio(b[0].value)})};Joomla.MediaManager.Edit.crop={Activate:function Activate(b){a(b)},Deactivate:function Deactivate(){Joomla.MediaManager.Edit.crop.cropper&&Joomla.MediaManager.Edit.crop.cropper.destroy()}}}();