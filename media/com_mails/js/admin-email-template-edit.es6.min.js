((a,b)=>{'use strict';class c{constructor(a,b){this.form=a,this.inputSubject=this.form.querySelector("#jform_subject"),this.inputBody=this.form.querySelector("#jform_body"),this.inputHtmlBody=this.form.querySelector("#jform_htmlbody"),this.templateData=b&&b.templateData?b.templateData:{},this.form.EmailTemplateEdit=this}setBodyValue(a){this.inputBody.disabled||(b.editors.instances[this.inputBody.id]?b.editors.instances[this.inputBody.id].setValue(a):this.inputBody.value=a)}setHtmlBodyValue(a){this.inputHtmlBody.disabled||(b.editors.instances[this.inputHtmlBody.id]?b.editors.instances[this.inputHtmlBody.id].setValue(a):this.inputHtmlBody.value=a)}insertTag(a,c){if(!a)return!1;let d;switch(c){case"body":d=this.inputBody;break;case"htmlbody":d=this.inputHtmlBody;break;default:return!1;}return!d.disabled&&(b.editors.instances[d.id]?b.editors.instances[d.id].replaceSelection(a):d.value+=` ${a}`,!0)}bindListeners(){const c=a.querySelectorAll("input[type=radio][name=\"jform[subject_switcher]\"]"),d=a.querySelectorAll("input[type=radio][name=\"jform[body_switcher]\"]"),e=a.querySelectorAll("input[type=radio][name=\"jform[htmlbody_switcher]\"]"),f=({target:a})=>{"0"===a.value?(this.inputSubject.disabled=!0,this.inputSubject.value=this.templateData.subject?this.templateData.subject.master:""):"1"===a.value?(this.inputSubject.disabled=!1,this.inputSubject.value=this.templateData.subject?this.templateData.subject.translated:""):console.error("unrecognised value")};Array.prototype.forEach.call(c,a=>{a.addEventListener("change",f)});const g=({target:a})=>{const b=this.form.querySelector(".tags-container-body");"0"===a.value?(this.setBodyValue(this.templateData.body?this.templateData.body.master:""),this.inputBody.disabled=!0,b.classList.add("hidden")):"1"===a.value?(this.inputBody.disabled=!1,this.inputBody.readOnly=!1,this.setBodyValue(this.templateData.body?this.templateData.body.translated:""),b.classList.remove("hidden")):console.error("unrecognised value")};Array.prototype.forEach.call(d,a=>{a.addEventListener("change",g)});const h=({target:a})=>{const c=this.form.querySelector(".tags-container-htmlbody");"0"===a.value?(this.setHtmlBodyValue(this.templateData.htmlbody?this.templateData.htmlbody.master:""),this.inputHtmlBody.disabled=!0,b.editors.instances[this.inputHtmlBody.id].disable(!0),c.classList.add("hidden")):"1"===a.value?(b.editors.instances[this.inputHtmlBody.id].disable(!1),this.inputHtmlBody.disabled=!1,this.inputHtmlBody.readOnly=!1,this.setHtmlBodyValue(this.templateData.htmlbody?this.templateData.htmlbody.translated:""),c.classList.remove("hidden")):console.error("unrecognised value")};Array.prototype.forEach.call(e,a=>{a.addEventListener("change",h)}),this.form.querySelectorAll(".edit-action-add-tag").forEach(a=>{a.addEventListener("click",a=>{a.preventDefault();const b=a.target;this.insertTag(b.dataset.tag,b.dataset.target)})})}}a.addEventListener("DOMContentLoaded",()=>{const d=new c(a.getElementById("item-form"),b.getOptions("com_mails"));d.bindListeners()})})(document,Joomla);