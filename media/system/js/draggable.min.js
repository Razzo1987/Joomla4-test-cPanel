document.addEventListener("DOMContentLoaded",function(){'use strict';var a,b,c,d=document.querySelector(".js-draggable"),e=d.querySelectorAll("[name=\"order[]\"]");if(d)a=d.getAttribute("data-url"),b=d.getAttribute("data-direction"),c=d.getAttribute("data-nested");else if(Joomla.getOptions("draggable-list")){var f=Joomla.getOptions("draggable-list");d=document.querySelector(f.id),d.classList.contains("js-draggable")||d.classList.add("js-draggable"),a=f.url,b=f.direction,c=f.nested}if(d){for(var g=0,h=e.length;h>g;g+=1)e[g].setAttribute("data-order",g+1);document.addEventListener("touchstart",function(){},!1);var i=function(a,b){var c,d,e=[],f=[].slice.call(a.querySelectorAll("[name=\"order[]\"]")),g=[].slice.call(a.querySelectorAll("[name=\"cid[]\"]"));for("desc"===b&&(f.reverse(),g.reverse()),c=0,d=f.length;d>c;c+=1)f[c].value=c+1,e.push("order[]=".concat(encodeURIComponent(c))),e.push("cid[]=".concat(encodeURIComponent(g[c].value)));return e};dragula([d],{direction:"vertical",copy:!1,revertOnSpill:!0,accepts:function accepts(a,b,d,e){return c?null===e?null==e||e&&"tr"===e.tagName.toLowerCase():e.getAttribute("data-draggable-group")&&e.getAttribute("data-draggable-group")===a.getAttribute("data-draggable-group"):null===e||e&&"tr"===e.tagName.toLowerCase()}}).on("drag",function(){}).on("cloned",function(){var a=document.querySelector(".gu-mirror");a.classList.add("table")}).on("drop",function(){if(a){var c=document.querySelector("[name=\"task\"]");c&&c.setAttribute("name","some__Temporary__Name__");var e={url:a,method:"POST",data:i(d,b).join("&"),perform:!0};Joomla.request(e),c&&c.setAttribute("name","task")}}).on("dragend",function(){for(var a=d.querySelectorAll("[name=\"order[]\"]"),b=0,c=a.length;c>b;b+=1)a[b].setAttribute("data-order",b+1)})}});