"use strict";((a,b)=>{class c extends HTMLElement{constructor(){if(super(),!b)throw new Error("Joomla API is not properly initiated");if(!this.getAttribute("uri"))throw new Error("No valid url for validation")}connectedCallback(){const a=this,b=document.getElementById("sendtestmail");b&&b.addEventListener("click",()=>{a.sendTestMail(a)})}sendTestMail(){const a={smtpauth:document.getElementById("jform_smtpauth1").checked?1:0,smtpuser:this.querySelector("[name=\"jform[smtpuser]\"]").value,smtppass:this.querySelector("[name=\"jform[smtppass]\"]").value,smtphost:this.querySelector("[name=\"jform[smtphost]\"]").value,smtpsecure:this.querySelector("[name=\"jform[smtpsecure]\"]").value,smtpport:this.querySelector("[name=\"jform[smtpport]\"]").value,mailfrom:this.querySelector("[name=\"jform[mailfrom]\"]").value,fromname:this.querySelector("[name=\"jform[fromname]\"]").value,mailer:this.querySelector("[name=\"jform[mailer]\"]").value,mailonline:document.getElementById("jform_mailonline1").checked?1:0};b.removeMessages(),b.request({url:this.getAttribute("uri"),method:"POST",data:JSON.stringify(a),perform:!0,headers:{"Content-Type":"application/json"},onSuccess:a=>{a=JSON.parse(a),"object"==typeof a.messages&&null!==a.messages&&b.renderMessages(a.messages)},onError:a=>{b.renderMessages(b.ajaxErrorsMessages(a))}})}}a.define("joomla-field-send-test-mail",c)})(customElements,Joomla);